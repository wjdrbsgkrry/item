<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 박정균(wjdrbs2024) • calmgram</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="https://i.ibb.co/yRBM2W9/free-icon-instagram-3579034.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- <link rel="stylesheet" href="(main).css" type="text/css"> -->

    <style>
        @import "(reset).css";
        @import "(menu).css";
        /* @import "(rightmenu).css"; */
    </style>
</head>

<body>

    <!-- left -->

    <div class="firtst_contents-wrapper">
        <div class="wrapper left_menu-wrapper">
            <div class="left_menu mainline">
                <div class="top_tap">
                    <button class="button" id="button_main" title="인스타그램 홈페이지">
                        <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMTA3MTlfMTk3%2FMDAxNjI2NjgzOTcxNDU5.ws0HSb-E5UjfrMLUYLmjE0EGec3jTgQoBBP1eegia2kg.A0I-8kXcWF0OLqxfJ5UPNaN5_EpzwOm3uHHUsX8ShTAg.PNG.kyungoh93%2F%25C0%25CE%25BD%25BA%25C5%25B8%25B1%25D7%25B7%25A5_%25B7%25CE%25B0%25ED_1920_02.png&type=sc960_832"
                            width="40px" height="40px" />
                    </button>
                </div>
                <div class="middle_tap">
                    <button class="button" id="button_home" title="홈으로 이동">
                        <img src="https://cdn-icons-png.flaticon.com/128/5948/5948524.png" width="35px" height="35px" />
                    </button>
                    <button class="button" id="button_search" title="검색">
                        <img src="https://cdn-icons-png.flaticon.com/128/5948/5948534.png" width="35px" height="35px" />
                    </button>
                    <button class="button" id="button_explore" title="구글 탐색">
                        <img src="https://cdn-icons-png.flaticon.com/128/4406/4406266.png" width="35px" height="35px" />
                    </button>
                    <button class="button" id="button_reels" title="오늘의 릴스">
                        <img src="https://cdn-icons-png.flaticon.com/128/5948/5948543.png" width="35px" height="35px" />
                    </button>
                    <button class="button" id="button_DM" title="Direct Massage">
                        <img src="https://cdn-icons-png.flaticon.com/128/10863/10863770.png" width="35px"
                            height="35px" />
                    </button>
                    <button class="button" id="button_heart" title="좋아요">
                        <img src="https://cdn-icons-png.flaticon.com/128/1077/1077035.png" width="35px" height="35px" />
                    </button>
                    <button class="button" id="button_add" title="더보기">
                        <img src="https://cdn-icons-png.flaticon.com/512/6537/6537820.png" width="35px" height="35px" />
                    </button>
                </div>
                <div class="bottom_tap">
                    <button class="button" id="button_profile" title="내 프로필">
                        <img src="https://cdn-icons-png.flaticon.com/128/6098/6098434.png" width="35px" height="35px" />
                    </button>
                    <button class="button" id="button_setting" title="설청">
                        <img src="https://cdn-icons-png.flaticon.com/128/15049/15049714.png" width="35px"
                            height="35px" />
                    </button>
                </div>
            </div>

            <!-- 팝업 -->
            <div class="left_menu popupline">
                <div class="Search_pop" id="Search_pop_info" tabindex="-1" style="display:none;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">검색</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                                    id="close_pop"></button>
                            </div>
                            <div class="modal-body">
                                <textarea id="searchInput" class="form-control" placeholder="검색어를 입력하세요"></textarea>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="check_search">검색하기</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- main -->

        <div class="wrapper main-wrapper">
            <div class="mytitle">
                <div class="mypro">
                    <p> @wjdrbs2024 </p>
                </div>

                <div class="myprofile">

                </div>
                <div class="likes">
                    <button class="instagram-btn like-btn">
                        <i class="fas fa-heart"></i>
                    </button>
                    <button class="instagram-btn comment-btn">
                        <i class="fas fa-comment"></i>
                    </button>
                    <button class="instagram-btn send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="string">
                    <h4>22,546 likes</h4>
                    <h5>박정균 &nbsp;&nbsp;
                        <button id="mbtiButton" type="button" class="btn btn-link">#mbti</button>
                        <button id="hobbyButton" type="button" class="btn btn-link">#hobby</button>
                        <button id="introButton" type="button" class="btn btn-link">#introdece</button>
                        <button id="goalButton" type="button" class="btn btn-link">#goal</button>
                    </h5>
                    <div id="mbti">
                        <p>INTP 입니다.</p>
                    </div>
                    <div id="hobby">
                        <p>개발과 게임입니다.</p>
                    </div>
                    <div id="introduce">
                        <p>원화 지망후 개발 지망입니다!</p>
                    </div>
                    <div id="goal">
                        <p>모든지 잘 설명하는 개발자, 이론이 빠삭한 개발자</p>
                    </div>

                    <button id="replyButton" type="button" class="btn btn-light">View all <span id="countbtn">105</span>
                        Comments</button>
                    <div>

                    </div>

                    <div class="reply" id="reply">
                        <div id="list" class="list-group"> </div>
                        <div class="blank"> </div>
                        <div class="nickname">
                            <div class="col-md">
                                <div class="form-floating">
                                    <textarea class="form-control" placeholder="Leave a comment here"
                                        id="nickname"></textarea>
                                    <label for="floatingTextarea">Nickname...</label>
                                </div>
                            </div>
                            <div class="form-floating">
                                <textarea class="form-control" placeholder="Leave a comment here" id="comment"
                                    style="height: 100px"></textarea>
                                <label for="floatingTextarea2">Comments...</label>
                            </div>
                            <button id="postingBtn" type="button" class="btn btn-light">posting</button>
                        </div>
                    </div>
                    <p class="date">2 days ago</p>
                </div>
            </div>
        </div>

        <!-- right -->

        <div class="wrapper right_menu-wrapper">
            <div id="sort" style="margin-top: 10px; ">
                <div class="circle">
                    <a href="https://www.instagram.com/spartacodingclub/"><img class="img-block"
                            style="border-radius: 50%;"
                            src="https://www.urbanbrush.net/web/wp-content/uploads/edd/2022/11/urbanbrush-20221108214712319041.jpg"
                            alt="..."></a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> 차분하조 </h2>
            </div>

            <p>회원님을 위한 추천</p>


            <div id="sort" style="margin-top: 10px;">
                <div class="circle">
                    <a href="https://www.instagram.com/99_sj.m/">
                        <div class="jb-a">
                            <img class="img-block" style="border-radius: 50%;"
                                src="https://www.urbanbrush.net/web/wp-content/uploads/edd/2022/11/urbanbrush-20221108214712319041.jpg"
                                alt="...">
                            <img src="https://i.ibb.co/WDGN19J/a.png" alt="" class="jb-c" img class="img-block"
                                style="border-radius: 50%;">
                        </div>
                    </a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> @99_sj.m </h2>

            </div>

            <div id="sort">
                <div class="circle">
                    <a href=https://www.instagram.com/arumi729>
                        <div class="jb-a">
                            <img class="img-block" style="border-radius: 50%;"
                                src="https://search.pstatic.net/sunny/?src=http%3A%2F%2Fartmug.kr%2Fimage%2Fup_img%2Fdetail%2Fgoods_6476%2F16786031530.gif&type=sc960_832_gif"
                                alt="...">
                            <img src="https://i.ibb.co/tHFRwdX/b.png" alt="" class="jb-c" img class="img-block"
                                style="border-radius: 50%;">
                        </div>
                    </a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> @arumi729 </h2>
            </div>

            <div id="sort">
                <div class="circle">
                    <a href="https://www.instagram.com/wjdrbs2024/">
                        <div class="jb-a">
                            <img class="img-block" style="border-radius: 50%;"
                                src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAxNzAxMDRfNzkg%2FMDAxNDgzNDY1NjYzNzU2.bg4w6I5AQi6x7fMey_PaaHUvKDaUfuvqJpP6lzxAgVgg.d6ARFMDTZK4heN4er1b333u8CQ4_dnNY4tlEBt401Mkg.JPEG.xenom%2F%25B5%25BF%25B9%25B0_%25BA%25B4%25BE%25C6%25B8%25AE_%25C6%25C4%25B6%25F5%25B8%25D3%25B8%25AE.jpg&type=sc960_832"
                                alt="...">
                            <img src="https://i.ibb.co/K9b04FW/c.png" alt="" class="jb-c" img class="img-block"
                                style="border-radius: 50%;">
                        </div>
                    </a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> @wjdrbs2024</h2>
            </div>

            <div id="sort">
                <div class="circle">
                    <a href="https://www.instagram.com/sh_unning/">
                        <div class="jb-a">
                            <img class="img-block" style="border-radius: 50%;"
                                src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMTA5MjhfMzMg%2FMDAxNjMyNzkyODk2MDM3.6a-vcF3hVKF-wXJlypJFzACcRho32EfG437inB1lZ1Ig.CWrIh5dVUGVqJGHC1A2TXBJqmCRv533NkETEaoV7JPIg.PNG.huganism%2Fimage.png&type=sc960_832"
                                alt="...">
                            <img src="https://i.ibb.co/LZ9qmVQ/d.png" alt="" class="jb-c" img class="img-block"
                                style="border-radius: 50%;">
                        </div>
                    </a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> @sh_unning </h2>
            </div>

            <div id="sort">
                <div class="circle">
                    <a href="https://www.instagram.com/ah_ma.do/">
                        <div class="jb-a">
                            <img class="img-block" style="border-radius: 50%;"
                                src="https://i.ibb.co/XyRPQb1/image-jip.jpg" alt="...">
                            <img src="https://i.ibb.co/c1Xc9G4/e.png" alt="" class="jb-c" img class="img-block"
                                style="border-radius: 50%;">
                        </div>
                    </a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> @ah_ma.do </h2>
            </div>

            <div id="sort">
                <div class="circle">
                    <a href="https://www.instagram.com/buck_k_s/">
                        <div class="jb-a">
                            <img class="img-block" style="border-radius: 50%;"
                                src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMTA5MDJfMjU3%2FMDAxNjMwNTY0ODcwNTE3.VjgOeC-KG7iCDeITLNp7FR7lhMg4k7njqYmW_a5LEPAg.9KQ1kWRFlKVogdGM9lkb4BlDze0r-lNQZKvrPFw3yd8g.PNG.ricemuseum1%2F123.png&type=sc960_832"
                                alt="...">
                            <img src="https://i.ibb.co/QK2zSL3/f.png" alt="" class="jb-c" img class="img-block"
                                style="border-radius: 50%;">
                        </div>
                    </a>
                </div>
                <h2 style="font-size: 15px; margin-bottom: 5px; margin-left: 15px;"> @buck_k_s </h2>
            </div>
        </div>
    </div>



    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc, getDocs, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // Firebase 구성 정보 설정
        const firebaseConfig = {
            apiKey: "AIzaSyAWR2QcOVoWMIBZJYpzbOCuLxzLqQyv1Dw",
            authDomain: "spartaproject-d87ba.firebaseapp.com",
            projectId: "spartaproject-d87ba",
            storageBucket: "spartaproject-d87ba.appspot.com",
            messagingSenderId: "565006782015",
            appId: "1:565006782015:web:cdea1d0a577294b517b28a",
            measurementId: "G-P5VMGQWKXW"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);



        //댓글 등록, 불러오기 
        async function loadComments() {
            try {
                let docs = await getDocs(collection(db, "teampage"));
                $('#list').empty();
                docs.forEach((doc) => {
                    let data = doc.data();
                    let nickname = data['nickname'];
                    let comment = data['comment'];


                    let tempHtml = `
            <a href="#" class="list-group-item list-group-item-action" data-doc-id="${doc.id}">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">${nickname}</h5>
                </div>
                <p class="mb-1">${comment}</p>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button type="button" class="btn btn-primary btn-sm" id="updateBtn">수정</button>
                    <button id="deletebutton" type="button" class="btn btn-secondary btn-sm">삭제</button>
                </div>
            </a>`;

                    $('#list').append(tempHtml);
                });
            } catch (error) {
                console.error('게시물 로드 오류:', error);
                alert('게시물 로드 중 오류가 발생했습니다.');
            }
        }
        $("#postingBtn").click(async function () {
            let nickname = $('#nickname').val();
            let comment = $('#comment').val();

            // 입력값 확인
            if (!nickname || !comment) {
                alert('닉네임과 댓글을 입력해주세요.');
                return;
            }

            // 새 게시물 객체
            let newPost = {
                'nickname': nickname,
                'comment': comment
            };

            try {
                // Firestore에 새로운 게시물 추가
                await addDoc(collection(db, "teampage"), newPost);
                alert('게시물 작성 완료!');

                // 새로 작성된 게시물 즉시 로드
                loadComments();

                $('#nickname').val(''); // 닉네임 입력 필드 초기화
                $('#comment').val('');// 댓글 입력 필드 초기화
            } catch (error) {
                console.error('게시물 작성 오류:', error);
                alert('게시물 작성 중 오류가 발생했습니다.');
            }
        });
        $(document).ready(function () {
            loadComments();
        });

        //토글 버튼
        $("#mbtiButton").click(async function () {
            $('#mbti').toggle();
        });
        $("#hobbyButton").click(async function () {
            $('#hobby').toggle();
        });
        $("#introButton").click(async function () {
            $('#introduce').toggle();
        });
        $("#goalButton").click(async function () {
            $('#goal').toggle();
        });
        $("#replyButton").click(async function () {
            $('#reply').toggle();
        });
        $("#replyButton2").click(async function () {
            $('#reply').toggle();
        });

        //파이어베이스 삭제
        $(document).on("click", "#deletebutton", async function (e) {
            e.preventDefault();
            const id = $(this).closest('.list-group-item').data('doc-id');
            if (confirm("정말 삭제 하시겠습니까?")) {
                try {
                    await deleteDoc(doc(db, 'teampage', id));
                    $(this).closest('.list-group-item').remove();
                } catch (error) {
                    alert(error);
                }
            }
        });

        //수정버튼
        async function updateBtn(e) {
            e.preventDefault();
            const docId = $(e.currentTarget).closest('.list-group-item').data('doc-id');
            const newComment = prompt('새로운 댓글을 입력하세요:');
            const postRef = doc(db, 'teampage', docId);
            try {
                await updateDoc(postRef, {

                    comment: newComment,
                });
                console.log('게시글이 수정되었습니다!');

                loadComments();

            } catch (error) {
                console.error('게시물 수정 오류:', error);
                alert('게시물 수정 중 오류가 발생했습니다.');
            }
        }

        $(document).on('click', '#updateBtn', updateBtn);
        const isFirstVisit = localStorage.getItem('isFirstVisit');
        if (isFirstVisit === null) {
            $('#reply').hide();
            localStorage.setItem('isFirstVisit', 'true');
        }

        $('#mbti').hide();
        $('#hobby').hide();
        $('#introduce').hide();
        $('#goal').hide();
        $('#reply').hide();

        //댓글 수 count 증가
        $("#postingBtn").click(function () {
            let count = parseInt($("#countbtn").text());
            let newcount = count + 1;
            $("#countbtn").text(newcount);
        });

        //댓글 수 count 감소
        $(document).on("click", ".btn.btn-secondary", function () {

            let count = parseInt($("#countbtn").text());
            let newCount = count - 1;
            $("#countbtn").text(newCount);
        });
    </script>

    <script>
        // 메인 이벤트
        const Main = document.getElementById('button_main');
        Main.addEventListener('click', () => window.open('https://www.instagram.com/'));

        // 홈 이벤트
        const Home = document.getElementById('button_home');

        // 검색 이벤트
        document.addEventListener('DOMContentLoaded', function () {
            const targetSearchPop = document.getElementById('Search_pop_info');
            const targetSearchButton = document.getElementById('button_search');
            const targetSearchClose = document.getElementById('close_pop');

            let isPopUpOpen = false;

            function togglePopUp() {
                if (isPopUpOpen) {
                    targetSearchPop.style.display = 'none';
                } else {
                    targetSearchPop.style.display = 'block';
                }
                isPopUpOpen = !isPopUpOpen;
            }

            targetSearchButton.addEventListener('click', function (event) {
                event.stopPropagation();
                togglePopUp();

                const mouseX = event.clientX;
                const mouseY = event.clientY;

                targetSearchPop.style.position = 'absolute';
                targetSearchPop.style.left = mouseX + 'px';
                targetSearchPop.style.top = mouseY + 'px';
            });

            targetSearchClose.addEventListener('click', () => {
                targetSearchPop.style.display = 'none';
                isPopUpOpen = false;
            });

            document.addEventListener('click', function (event) {
                if (!targetSearchPop.contains(event.target)) {
                    targetSearchPop.style.display = 'none';
                    isPopUpOpen = false;
                }
            });

            const searchCursor = document.getElementById('searchInput');
            searchCursor.addEventListener('focus', function () {
                this.textContent = '';
                this.style.color = "black";
            });

            const checkSearch = document.getElementById('check_search');
            checkSearch.addEventListener('click', function () {

            });
        });

        // 탐색 이벤트
        const explore = document.getElementById('button_explore');
        explore.addEventListener('click', () => window.open('https://www.google.com/'));

        // 릴스 이벤트
        const Reels = document.getElementById('button_reels');
        Reels.addEventListener('click', () => window.open('https://www.instagram.com/reels/'));


    </script>
</body>

</html>